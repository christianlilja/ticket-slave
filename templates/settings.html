{% extends "base.html" %}
{% block content %}
<h2>Settings</h2>

<!-- Tab navigation -->
<ul class="nav nav-tabs" id="settingsTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="general-tab" data-bs-toggle="tab" data-bs-target="#general" type="button" role="tab">General</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="email-tab" data-bs-toggle="tab" data-bs-target="#email" type="button" role="tab">Email Server</button>
  </li>
</ul>

<form method="POST" class="mt-3">
  <div class="tab-content" id="settingsTabsContent">

    <!-- General Settings Tab -->
    <div class="tab-pane fade show active" id="general" role="tabpanel">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" name="allow_registration" id="allow_registration" {% if settings['allow_registration'] == '1' %}checked{% endif %}>
        <label class="form-check-label" for="allow_registration">Allow new users to register</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" name="enable_api" id="enable_api" {% if settings['enable_api'] == '1' %}checked{% endif %}>
        <label class="form-check-label" for="enable_api">Enable API</label>
      </div>
    </div>

    <!-- Email Settings Tab -->
    <div class="tab-pane fade" id="email" role="tabpanel">
      <div class="mb-3 mt-3">
        <label for="smtp_server" class="form-label">SMTP Server</label>
        <input type="text" class="form-control" name="smtp_server" value="{{ settings['smtp_server'] }}">
      </div>
      <div class="mb-3">
        <label for="smtp_port" class="form-label">SMTP Port</label>
        <input type="text" class="form-control" name="smtp_port" value="{{ settings['smtp_port'] }}">
      </div>
      <div class="mb-3">
        <label for="smtp_from_email" class="form-label">From Email</label>
        <input type="email" class="form-control" name="smtp_from_email" value="{{ settings['smtp_from_email'] }}">
      </div>
      <div class="mb-3">
        <label for="smtp_username" class="form-label">SMTP Username</label>
        <input type="text" class="form-control" name="smtp_username" value="{{ settings['smtp_username'] }}">
      </div>
      <div class="mb-3">
        <label for="smtp_password" class="form-label">SMTP Password</label>
        <input type="password" class="form-control" name="smtp_password" value="{{ settings['smtp_password'] }}">
      </div>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" name="smtp_use_tls" id="smtp_use_tls" {% if settings['smtp_use_tls'] == '1' %}checked{% endif %}>
        <label class="form-check-label" for="smtp_use_tls">Use TLS</label>
      </div>
    </div>
  </div>

  <button type="submit" class="btn btn-primary mt-4">Save Settings</button>
</form>
{% endblock %}
