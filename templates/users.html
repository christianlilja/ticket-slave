{% extends "base.html" %}
{% block content %}
<h2>Manage Users</h2>

<form method="post" class="mb-4">
  <div class="row">
    <div class="col-md-4">
      <input type="text" name="new_username" class="form-control" placeholder="Username" required>
    </div>
    <div class="col-md-4">
      <input type="password" name="new_password" class="form-control" placeholder="Password" required>
    </div>
    <div class="col-md-2"></div>
    <div class="col-md-2">
      <button type="submit" class="btn btn-primary">Add User</button>
    </div>
  </div>
</form>

<table class="table table-dark table-hover">
  <thead>
    <tr>
      <th>Username</th>
      <th>Admin</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    <tr>
      <td>{{ user['username'] }}</td>
      <td>{{ 'Yes' if user['is_admin'] else 'No' }}</td>
      <td class="d-flex gap-2">
        {% if not user['is_admin'] %}
          <form method="post" style="display:inline;">
            <input type="hidden" name="delete_user" value="{{ user['username'] }}">
            <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Delete user {{ user['username'] }}?')">Delete</button>
          </form>
          <a href="{{ url_for('edit_user', user_id=user['id']) }}" class="btn btn-sm btn-secondary">Edit</a>
        {% else %}
          <span class="text-muted">Admin</span>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
