{% extends "base.html" %}
{% block content %}
<h2>Manage Users</h2>

<form method="post" class="row g-2 mb-4 align-items-center">
  <div class="col-md-4">
    <input type="text" name="new_username" class="form-control" placeholder="Username" required>
  </div>
  <div class="col-md-4">
    <input type="password" name="new_password" class="form-control" placeholder="Password" required>
  </div>
  <div class="col-md-4 d-grid">
    <button type="submit" class="btn btn-primary">Add User</button>
  </div>
</form>

<table class="table table table-hover">
  <thead>
    <tr>
      <th>Username</th>
      <th>Admin</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    <tr>
      <td>{{ user['username'] }}</td>
      <td>{{ 'Yes' if user['is_admin'] else 'No' }}</td>
      <td>
        <div class="d-flex gap-2">
          <a href="{{ url_for('users_bp.edit_user', user_id=user['id']) }}" class="btn btn-sm btn-secondary p-1">Edit</a>
      
          {% if not user['is_admin'] %}
            <form method="post" action="" onsubmit="return confirm('Delete user {{ user['username'] }}?')">
              <input type="hidden" name="delete_user" value="{{ user['username'] }}">
              <button type="submit" class="btn btn-sm btn-danger p-1">Delete</button>
            </form>
          {% endif %}
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
